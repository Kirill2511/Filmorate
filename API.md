# API Documentation

## API для работы с пользователями

### POST /users

Создание нового пользователя.

### PUT /users

Обновление информации о пользователе.

### GET /users

Получение списка всех пользователей.

### GET /users/{id}

Получение пользователя по идентификатору.

### PUT /users/{id}/friends/{friendId}

Добавление в друзья.

### DELETE /users/{id}/friends/{friendId}

Удаление из друзей.

### GET /users/{id}/friends

Получение списка друзей пользователя.

### GET /users/{id}/friends/common/{otherId}

Получение списка общих друзей.

### GET /users/{id}/feed

Получение ленты событий пользователя.

### GET /users/{id}/recommendations

Получение рекомендаций фильмов для пользователя.

### DELETE /users/{id}

Удаление пользователя по идентификатору.

## API для работы с фильмами

### POST /films

Добавление нового фильма.

### PUT /films

Обновление информации о фильме.

### GET /films

Получение списка всех фильмов.

### GET /films/{id}

Получение фильма по идентификатору.

### PUT /films/{id}/like/{userId}

Пользователь ставит лайк фильму.

### DELETE /films/{id}/like/{userId}

Пользователь удаляет лайк у фильма.

### GET /films/popular?count={count}&year={year}&genreId={genreId}

Получение списка популярных фильмов.

### GET /films/common?userId={userId}&friendId={friendId}

Получение списка общих фильмов двух пользователей, отсортированных по популярности.

### GET /films/director/{directorId}?sortBy={sortBy}

Получение списка фильмов конкретного режиссёра с сортировкой.

### GET /films/search?query={query}&by={by}

Поиск фильмов по названию и/или имени режиссёра.

### DELETE /films/{id}

Удаление фильма по идентификатору.

## API для работы с жанрами

### GET /genres

Получение списка всех жанров.

### GET /genres/{id}

Получение жанра по идентификатору.

## API для работы с рейтингами MPA

### GET /mpa

Получение списка всех рейтингов MPA.

### GET /mpa/{id}

Получение рейтинга MPA по идентификатору.

## API для работы с режиссёрами

### GET /directors

Получение списка всех режиссёров.

### GET /directors/{id}

Получение режиссёра по идентификатору.

### POST /directors

Добавление нового режиссёра.

### PUT /directors

Обновление информации о режиссёре.

### DELETE /directors/{id}

Удаление режиссёра по идентификатору.

## API для работы с отзывами

### POST /reviews

Добавление нового отзыва.

### PUT /reviews

Редактирование существующего отзыва.

### DELETE /reviews/{id}

Удаление отзыва по идентификатору.

### GET /reviews/{id}

Получение отзыва по идентификатору.

### GET /reviews?filmId={filmId}&count={count}

Получение списка отзывов.

### PUT /reviews/{id}/like/{userId}

Пользователь ставит лайк отзыву (увеличивает рейтинг полезности на 1).

### PUT /reviews/{id}/dislike/{userId}

Пользователь ставит дизлайк отзыву (уменьшает рейтинг полезности на 1).

### DELETE /reviews/{id}/like/{userId}

Пользователь удаляет лайк с отзыва.

### DELETE /reviews/{id}/dislike/{userId}

Пользователь удаляет дизлайк с отзыва.

## Валидация

### Пользователи

- `email` — не может быть пустым, должен содержать символ `@`
- `login` — не может быть пустым, не может содержать пробелы
- `birthday` — не может быть в будущем

### Фильмы

- `name` — не может быть пустым
- `description` — максимальная длина 200 символов
- `releaseDate` — не раньше 28 декабря 1895 года
- `duration` — должно быть положительным числом
- `mpa` — должен быть указан
- `directors` — список режиссёров (опционально)

### Режиссёры

- `name` — не может быть пустым
- `id` — обязателен при обновлении

### Отзывы

- `content` — не может быть пустым, максимальная длина 1000 символов
- `isPositive` — должен быть указан (true/false)
- `userId` — должен быть указан
- `filmId` — должен быть указан

## Коды ответов

- `200 OK` — успешное выполнение запроса
- `201 Created` — ресурс успешно создан
- `400 Bad Request` — ошибка валидации
- `404 Not Found` — ресурс не найден
- `500 Internal Server Error` — внутренняя ошибка сервера
